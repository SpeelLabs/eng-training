# 3. 基本設計

## ソフトウェア開発の概論：基本設計編

### 3.1 基本設計とは何か

#### 3.1.1 基本設計の定義

**基本設計**とは、要件定義で決めた 「何を作るか」 を、「どのように作るか」 の具体的な設計に落とし込む工程です。システムの全体構造、データ構造、処理の流れ、画面構成などを決定し、実装チームが開発を進められる設計図を作成することが目的です。

基本設計は、要件定義の抽象的な機能仕様を、実装可能な技術仕様に変換する工程です。建築に例えるなら、「3LDKの家を建てる」 という要件を 「どの材料で、どのような構造で、どのような設備配置で」 という具体的な設計図に変換する作業です。

**基本設計の成果物**:

* システム構成図
* 画面遷移図・画面設計書
* データベース設計（ER図）
* オブジェクト図
* 処理フロー図

> 📝 **ポイント**: 基本設計は 「どのように作るか」 を決める工程です。「どのような順序で作るか」 「どのような技術で作るか」 は詳細設計・実装フェーズで決定します。

#### 3.1.2 基本設計がなぜ重要なのか

ソフトウェア開発においては、企画・要件定義・基本設計といった上流工程が開発全体の成否を決定づけます。基本設計は特に、要件定義で明確化された 「何を作るか」 を実装可能な形に変換する重要な橋渡し役を担っています。

基本設計が不十分だと、以下のような問題が発生します：

* 実装段階で設計の矛盾や不備が発覚し、大幅な手戻りが発生する
* 開発者ごとに実装方針が異なり、システム全体の整合性が取れない
* データの不整合や処理の重複が発生する
* 性能問題やセキュリティ問題が後から発覚する

逆に、しっかりとした基本設計があると：

* 実装チームが迷わずに開発を進められる
* システム全体の一貫性と整合性が保たれる
* 性能やセキュリティを考慮した堅牢なシステムが構築できる
* テスト設計や運用設計の基盤となる

> 📝 **ポイント**: 基本設計の品質が、システム全体の品質を大きく左右します。「急がば回れ」 の精神で、しっかりとした設計を行うことが重要です。

#### 3.1.3 基本設計の種類

基本設計は大きく以下の領域に分類されます：

**システム設計**\
システム全体の構成や技術アーキテクチャを設計します。どのような技術スタック、サーバー構成、ネットワーク構成でシステムを実現するかを決定します。

**データ設計**\
システムで扱うデータの構造と関係を設計します。データベースのテーブル構成、データ項目、制約条件などを定義します。

**画面設計**\
ユーザーインターフェースの構成と動作を設計します。画面レイアウト、画面遷移、操作フローなどを定義します。

**処理設計**\
システムの処理ロジックと制御フローを設計します。業務処理の流れ、例外処理、エラーハンドリングなどを定義します。

### 3.2 設計の優先順位と進め方

#### 3.2.1 最適な設計順序

効果的な基本設計を行うためには、適切な順序で設計を進めることが重要です。

{% stepper %}
{% step %}
**画面設計（ユーザーインターフェース設計）**

最初に取り組むべきは画面設計です。ユーザーは画面を通じてシステムを利用するため、画面での操作性や見やすさについて早期に関係者の合意を得ることが、プロジェクト成功への近道となります。

**画面設計で決定する内容**：

* 各画面でユーザーが実行できる操作
* 表示される情報の種類とレイアウト
* 画面間の遷移フローと条件
* エラー表示や確認メッセージの内容
{% endstep %}

{% step %}
**機能設計（処理ロジック設計）**

画面設計が完了したら、その画面で実行される処理の詳細を設計します。「画面の裏側で何が行われるか」を明確に定義することで、開発チームが実装すべき内容が具体化されます。

**機能設計で決定する内容**：

* 各処理で必要となる入力データと取得元
* 実行される計算や判定のロジック
* 処理結果の出力先と形式
* 例外処理とエラーハンドリングの方針
{% endstep %}

{% step %}
**データ設計（データ構造設計）**

画面設計と機能設計が固まった段階で、それらを支えるデータ構造を設計します。必要なデータが明確になってからデータ設計を行うことで、無駄のない効率的なデータベース設計が可能になります。

**データ設計で決定する内容**：

* 必要なデータ項目とその詳細仕様
* データベーステーブルの構造と関係
* データの流れと更新タイミング
* データの整合性を保つための制約条件
{% endstep %}
{% endstepper %}

#### 3.2.2 設計の反復改善

設計は一度で完璧に仕上がるものではありません。各段階で得られた知見を元に、前の段階に戻って調整を行う反復的なアプローチが効果的です。

**設計レビューのポイント**：

* 画面設計：ユーザーの操作性と情報の見やすさ
* 機能設計：処理の効率性と例外処理の網羅性
* データ設計：データの整合性と将来の拡張性

### 3.3 基本設計の基本プロセス

#### 3.3.1 基本設計プロセス全体の流れ

基本設計は以下のステップで進行します：

1. **要件の分析・整理** - 要件定義書の内容を設計観点で分析する
2. **システム構成の設計** - 全体のアーキテクチャを決定する
3. **画面設計** - ユーザーインターフェースを設計する
4. **機能設計** - システムの処理の流れを設計する
5. **データ設計** - データベースやオブジェクトの構造を設計する
6. **設計書の作成** - 設計内容を文書化し、関係者で共有する

#### 3.3.2 設計手法と技法

**構造化設計**\
システムを機能単位に分割し、階層構造で整理する設計手法です。複雑なシステムを理解しやすい単位に分解して設計できます。

**オブジェクト指向設計**\
現実世界の概念をオブジェクトとしてモデル化し、オブジェクト間の関係でシステムを設計する手法です。保守性と拡張性の高いシステムを設計できます。

**MVC アーキテクチャ**\
Model（データ）、View（表示）、Controller（制御）の3つの役割に分離してシステムを設計するアーキテクチャパターンです。関心の分離により保守しやすいシステムを構築できます。

#### 3.3.3 設計における重要な原則

**関心の分離**\
異なる関心事は異なる部分で扱うという原則です。データ処理、画面表示、業務ロジックなどを明確に分離して設計します。

**疎結合・高凝集**\
モジュール間の依存関係を最小限にし（疎結合）、モジュール内の関連性を高める（高凝集）という原則です。

**再利用性**\
共通する処理やデータ構造は再利用可能な形で設計するという原則です。開発効率とメンテナンス性が向上します。

### 3.4 学習記録アプリの基本設計実践

#### 3.4.1 要件定義の振り返りと設計への変換

前回の要件定義フェーズで決定した内容を基本設計の観点で整理しましょう：

**要件定義での決定事項** → **基本設計での技術化**

| 要件定義内容                  | 基本設計での技術化                    |
| ----------------------- | ---------------------------- |
| 機能要件：ユーザー認証、学習記録管理、統計表示 | システム構成：3層アーキテクチャ、認証機能、CRUD処理 |
| データ要件：ユーザー、科目、学習記録の管理   | データベース設計：3つのエンティティとER図       |
| 非機能要件：応答時間 3秒以内、モバイル対応  | 技術選定：軽量フレームワーク、レスポンシブデザイン    |
| ユースケース：学習記録追加、一覧表示、統計表示 | 画面設計：8画面の遷移フロー、操作手順の設計       |

#### 3.4.2 システム構成設計

**アーキテクチャパターン**

学習記録アプリには **3層アーキテクチャ** を採用します：

| 層          | 役割           | 技術例                 |
| ---------- | ------------ | ------------------- |
| プレゼンテーション層 | ユーザーインターフェース | HTML/CSS/JavaScript |
| ビジネスロジック層  | 業務処理・制御処理    | Java Servlet        |
| データアクセス層   | データベースアクセス   | JDBC + MySQL        |

**システム構成図**

```
[ユーザー] 
    ↓ HTTP Request
[Webブラウザ] 
    ↓ HTTP Request/Response
[Webサーバー(Tomcat)]
    ↓ SQL
[データベースサーバー(MySQL)]
```

**技術スタック**

| 分類      | 技術                  | 用途           |
| ------- | ------------------- | ------------ |
| フロントエンド | HTML/CSS/JavaScript | ユーザーインターフェース |
| バックエンド  | Java + Servlet      | サーバーサイド処理    |
| データベース  | MySQL               | データ永続化       |
| Webサーバー | Apache Tomcat       | アプリケーション実行環境 |

#### 3.4.3 画面遷移設計

**画面一覧**

<table><thead><tr><th width="160.199951171875">画面ID</th><th>画面名</th><th>主要機能</th></tr></thead><tbody><tr><td>L001</td><td>ログイン画面</td><td>認証情報入力・ログイン処理</td></tr><tr><td>R001</td><td>新規登録画面</td><td>ユーザー登録情報入力・登録処理</td></tr><tr><td>H001</td><td>ホーム画面</td><td>メニュー表示・各機能へのナビゲーション</td></tr><tr><td>S001</td><td>学習記録入力画面</td><td>学習記録の新規入力・保存</td></tr><tr><td>S002</td><td>学習記録一覧画面</td><td>学習記録の表示・編集・削除</td></tr><tr><td>S003</td><td>学習記録編集画面</td><td>既存記録の編集・更新</td></tr><tr><td>T001</td><td>統計表示画面</td><td>学習時間統計の表示</td></tr><tr><td>M001</td><td>科目管理画面</td><td>科目の追加・編集・削除</td></tr></tbody></table>

**画面遷移図**

```
[ログイン画面(L001)] 
    ↓ ログイン成功
[ホーム画面(H001)] 
    ↓ 記録入力ボタン
[学習記録入力画面(S001)]
    ↓ 保存
[学習記録一覧画面(S002)]
    ↓ 編集ボタン
[学習記録編集画面(S003)]

[ホーム画面(H001)]
    ↓ 統計表示ボタン  
[統計表示画面(T001)]

[ホーム画面(H001)]
    ↓ 科目管理ボタン
[科目管理画面(M001)]
```

**画面設計の基本方針**

* **レスポンシブデザイン** - スマートフォン・タブレット・PCで適切に表示
* **直感的な操作** - 迷わず操作できるシンプルなインターフェース
* **一貫したデザイン** - 全画面で統一されたデザインルール
* **アクセシビリティ** - 誰でも使いやすいユーザーインターフェース

#### 3.4.4 機能設計と処理フロー

**処理フロー設計の例：学習記録追加処理**

```
1. ユーザーが学習記録入力画面を表示
2. システムが入力フォームを表示
3. ユーザーが必要項目を入力
4. ユーザーが「保存」ボタンをクリック
5. システムが入力値を検証
6. [正常系] 検証OK → 7へ
   [異常系] 検証NG → エラーメッセージ表示 → 3へ
7. システムがデータベースに記録を保存
8. システムが保存完了メッセージを表示
9. システムが学習記録一覧画面に遷移
```

**機能間の連携設計**

各画面で実行される処理と、その処理で必要となるデータの流れを明確に定義します。

**学習記録入力機能の詳細設計**：

* **入力データ**: 学習日、科目ID、学習時間、学習内容
* **データ取得元**: ユーザー入力（画面フォーム）、科目マスタ（データベース）
* **処理内容**: 入力値検証、重複チェック、データベース保存
* **出力先**: 成功時は一覧画面へ遷移、エラー時は入力画面に戻る

**エラーハンドリング設計**

<table><thead><tr><th width="160.199951171875">エラー種別</th><th>発生条件</th><th>対応方法</th></tr></thead><tbody><tr><td>入力値エラー</td><td>必須項目未入力、形式不正</td><td>エラーメッセージ表示、入力画面に戻る</td></tr><tr><td>システムエラー</td><td>DB接続失敗、SQL実行エラー</td><td>システムエラー画面表示</td></tr><tr><td>セッションエラー</td><td>未ログイン、セッション切れ</td><td>ログイン画面にリダイレクト</td></tr></tbody></table>

#### 3.4.5 オブジェクト設計（オブジェクト図）

**オブジェクト図とは**

**オブジェクト図**は、システムの特定の時点における実際のデータ（オブジェクトのインスタンス）とその関係を表現した図です。抽象的なデータ構造ではなく、具体的なデータ値を持つオブジェクト同士がどのように関連しているかを視覚的に示します。

データベース設計を行う前に、まず「どのようなデータが実際に存在し、どのように関連するか」を具体例で確認することで、より適切なデータ構造を設計できます。

**学習記録アプリのオブジェクト図例**

**シナリオ: 2024年1月の学習データ**

```
┌─────────────────────┐
│   ユーザー: 田中太郎   │
│ user_id: 1          │
│ email: tanaka@...   │
│ 登録日: 2024-01-01   │
└─────────────────────┘
          │
          │ 所有
          ▼
┌─────────────────┐    ┌─────────────────┐
│ 科目: Java基礎   │    │ 科目: データベース │
│ subject_id: 101 │    │ subject_id: 102 │
│ 作成日: 01-01    │    │ 作成日: 01-02    │
└─────────────────┘    └─────────────────┘
          │                      │
          │ 学習記録              │ 学習記録
          ▼                     ▼
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│ 記録1            │    │ 記録2           │    │ 記録3            │
│ record_id: 201  │    │ record_id: 202  │    │ record_id: 203  │
│ 学習日: 01-15    │    │ 学習日: 01-16    │    │ 学習日: 01-17    │
│ 時間: 60分       │    │ 時間: 90分       │    │ 時間: 45分       │
│ 内容: 変数の基本  │    │ 内容: ER図作成    │    │ 内容: SQL基本    │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

**複数ユーザーの関係例**

```
┌─────────────────────┐              ┌─────────────────────┐
│   ユーザー: 田中太郎   │              │   ユーザー: 山田花子  │
│ user_id: 1          │              │ user_id: 2          │
│ email: tanaka@...   │              │ email: yamada@...   │
└─────────────────────┘              └─────────────────────┘
          │                                    │
          │ 所有                                │ 所有
          ▼                                   ▼
┌──────────────────┐                  ┌─────────────────┐
│ 科目: Java基礎    │                  │ 科目: Python入門  │
│ subject_id: 101  │                  │ subject_id: 103 │
│ user_id: 1       │                  │ user_id: 2      │
└──────────────────┘                  └─────────────────┘
          │                                    │
          │ 学習記録                            │ 学習記録
          ▼                                   ▼
┌─────────────────┐                  ┌─────────────────┐
│ Java学習記録     │                  │ Python学習記録   │
│ record_id: 201  │                  │ record_id: 204  │
│ user_id: 1      │                  │ user_id: 2      │
│ subject_id: 101 │                  │ subject_id: 103 │
│ 時間: 60分       │                  │ 時間: 120分      │
└─────────────────┘                  └─────────────────┘
```

**オブジェクト設計 → データベース設計の流れ**

オブジェクト図で確認した具体的なデータの関係性から、以下の設計要件が明確になります：

1. **データの関係性** - ユーザー、科目、学習記録の3つのエンティティが必要
2. **参照関係** - 科目と学習記録は必ずユーザーに紐づく
3. **データの独立性** - ユーザーごとにデータが分離される必要がある
4. **制約条件** - 削除時の整合性や必須データの定義が必要

#### 3.4.6 データベース設計（ER図）

オブジェクト図で確認した具体的なデータの関係を元に、データベースの論理構造を設計します。

**エンティティの抽出**

オブジェクト図から以下のエンティティ（データのまとまり）を抽出します：

* **ユーザー（users）** - システム利用者の情報
* **科目（subjects）** - 学習科目の情報
* **学習記録（study\_records）** - 学習活動の記録

**ER図の設計**

| エンティティ         | 属性          | データ型         | 制約                                 |
| -------------- | ----------- | ------------ | ---------------------------------- |
| users          | user\_id    | INT          | PRIMARY KEY, AUTO\_INCREMENT       |
| users          | email       | VARCHAR(255) | UNIQUE, NOT NULL                   |
| users          | password    | VARCHAR(255) | NOT NULL                           |
| users          | created\_at | DATETIME     | NOT NULL                           |
| subjects       | subject\_id | INT          | PRIMARY KEY, AUTO\_INCREMENT       |
| subjects       | user\_id    | INT          | FOREIGN KEY → users.user\_id       |
| subjects       | name        | VARCHAR(100) | NOT NULL                           |
| subjects       | created\_at | DATETIME     | NOT NULL                           |
| study\_records | record\_id  | INT          | PRIMARY KEY, AUTO\_INCREMENT       |
| study\_records | user\_id    | INT          | FOREIGN KEY → users.user\_id       |
| study\_records | subject\_id | INT          | FOREIGN KEY → subjects.subject\_id |
| study\_records | study\_date | DATE         | NOT NULL                           |
| study\_records | study\_time | INT          | NOT NULL（分単位）                      |
| study\_records | content     | TEXT         | NULL（学習内容）                         |
| study\_records | created\_at | DATETIME     | NOT NULL                           |

**エンティティ間の関係**

* users（1） : subjects（多） - 1人のユーザーは複数の科目を持てる
* users（1） : study\_records（多） - 1人のユーザーは複数の学習記録を持てる
* subjects（1） : study\_records（多） - 1つの科目は複数の学習記録を持てる

> 📝 **ポイント**: ER図では、エンティティ（四角）、属性（楕円）、関係（菱形）を使って、データの構造と関係を視覚的に表現します。オブジェクト図で確認した具体的な関係性を、データベースの論理構造として形式化したものです。

### 3.5 基本設計書の作成

#### 3.5.1 基本設計書とは

**基本設計書**は、システムの設計内容を体系的にまとめた文書です。実装チーム、テストチーム、運用チームが参照する重要な技術文書です。

#### 3.5.2 基本設計書の基本構成

<table><thead><tr><th width="160.20001220703125">セクション</th><th>内容</th><th>目的</th></tr></thead><tbody><tr><td>システム概要</td><td>システムの目的・構成・技術スタック</td><td>全体像の理解</td></tr><tr><td>システム構成</td><td>アーキテクチャ・技術選定・環境構成</td><td>技術的基盤の明確化</td></tr><tr><td>画面設計</td><td>画面遷移図・画面レイアウト・操作仕様</td><td>UI/UX設計の明確化</td></tr><tr><td>機能設計</td><td>処理フロー・業務ロジック・エラー処理</td><td>処理ロジックの明確化</td></tr><tr><td>データ設計</td><td>ER図・テーブル定義・データ項目定義</td><td>データ構造の明確化</td></tr><tr><td>オブジェクト設計</td><td>オブジェクト図・データ関係図</td><td>データの関係性の明確化</td></tr></tbody></table>

#### 3.5.3 設計レビューと品質管理

**設計レビューの観点**

* **完全性** - 要件がすべて設計に反映されているか
* **一貫性** - 設計要素間に矛盾がないか
* **実現可能性** - 設計が技術的に実装可能か
* **保守性** - 将来の変更・拡張に対応できるか
* **性能** - 非機能要件を満たす設計か

**品質管理手法**

* **レビューチェックリスト** - 確認項目を体系化
* **プロトタイピング** - 重要な部分を試作して検証
* **設計パターンの適用** - 実績のある設計手法を活用

### 3.6 基本設計から次のフェーズへ

#### 3.6.1 基本設計での重要な成果物

基本設計フェーズで作成した以下の成果物が、詳細設計・実装フェーズの重要な基盤となります：

**システム構成図**:

* システム全体のアーキテクチャと技術構成
* 各層の役割分担と技術選定根拠
* 非機能要件を満たすためのシステム構成

**画面遷移図と画面設計**:

* ユーザーの操作フローと画面構成
* 各画面の役割と責任範囲
* エラー処理や例外フローの設計

**機能設計書**:

* 各処理の詳細な動作仕様
* データの流れと変換ルール
* エラーハンドリングと例外処理

**データベース設計（ER図）**:

* エンティティ間の関係と制約条件
* 正規化されたテーブル構造
* インデックスやパフォーマンス考慮事項

**オブジェクト図**:

* 実際のデータと関係性の具体例
* データ整合性の検証材料
* テストデータ設計の参考資料

#### 3.6.2 詳細設計・実装フェーズへの引き継ぎ

基本設計で明確化した内容は、詳細設計・実装フェーズで以下のように具体的なコードに変換されます：

**基本設計** → **詳細設計・実装での具体化**

* システム構成 → 開発環境構築・フレームワーク選定
* 画面設計 → HTML/CSS・JavaScript実装
* 機能設計 → ビジネスロジック・例外処理実装
* ER図 → DDL文・テーブル作成スクリプト
* オブジェクト図 → エンティティクラス・DAO設計

***

### まとめ

基本設計は、要件定義の「何を作るか」を「どのように作るか」に変換する重要な工程です。特に画面設計→機能設計→データ設計の順序で進めることで、ユーザーの視点を重視した効果的な設計が可能になります。

基本設計で重要なのは、要件を満たしながらも、保守性・拡張性・性能を考慮したバランスの良い設計を行うことです。また、設計の一貫性と整合性を保ち、実装チームが迷わずに開発を進められる明確な設計図を作成することが不可欠です。

**実務で活用するために**:

* 要件を技術仕様に正確に変換する設計スキルを身につける
* 画面→機能→データの設計順序を意識した効率的な設計プロセスを習得する
* データの正規化とオブジェクト設計の基本原則を理解する
* システム全体を俯瞰し、一貫性のある設計を行う能力を磨く
* 将来の変更・拡張を考慮した柔軟な設計思考を身につける
