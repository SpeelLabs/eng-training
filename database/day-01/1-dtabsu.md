---
description: この章では、データベースの基本概念と MySQL について学びます。日常生活での例を交えながら、データベースとは何か、なぜ必要なのかを理解していきましょう。
---

# 1. データベース入門

### 1.1 データベースとは何か

私たちは日々、様々な情報を整理して保存しています。例えば、

* スマートフォンの連絡先リスト
* 学校の生徒名簿
* 書店の在庫管理表
* オンラインショップの商品カタログ

こうした情報を大量に、かつ効率的に管理するのが 「データベース」 です。

**データベース**とは、構造化された形式で情報を保存し、必要なときに素早く取り出せるようにするシステムです。身近な例で言えば、表計算ソフト (Excel など) のシートをより高度にしたもので、データ間の関連付けや複数人での同時編集、高速な検索・集計などが可能になったものと考えられます。

> 📝 **ポイント**: 表計算ソフトもデータを管理できますが、大量のデータを扱ったり、複数のユーザーが同時にアクセスしたり、複雑な検索をしたりする場合は、データベースの方が適しています。

#### 日常生活の例: 図書館のカード目録とデータベース

昔の図書館では、本の情報をカード目録で管理していました。

* 著者名順のカード
* 書名順のカード
* 分類番号順のカード

これらを電子化し、瞬時に検索できるようにしたのが 「図書館データベース」 です。1枚の本のカードに相当するのが 「 1つのレコード (行) 」、本のタイトルや著者名などの項目が 「カラム (列) 」です。

### 1.2 データベースの役割

データベースには以下のような重要な役割があります。

1. **データの保存**: 大量のデータを効率的に保存する
2. **データの検索**: 必要な情報をすばやく見つける
3. **データの整合性確保**: 間違ったデータが入らないようにする
4. **複数人での共有**: 同時に複数のユーザーがアクセスできる
5. **セキュリティ管理**: データへのアクセス権限を制御する

例えば、オンラインショッピングサイトでは、

* 商品情報をデータベースに保存
* 顧客が検索すると、該当する商品を表示
* 在庫数が正確に管理される (整合性)
* 複数の顧客が同時に買い物ができる (共有)
* 顧客は自分の注文だけを見られる (セキュリティ)

> 📝 **ポイント**: データベースがなければ、現代のウェブサービスやアプリケーションのほとんどは成り立ちません。Amazon やネットバンキング、SNS、動画配信サービスなど、あらゆるサービスの裏側ではデータベースが動いています。

### 1.3 データベースの種類

データベースには大きく分けて以下の種類があります：

#### リレーショナルデータベース (RDBMS)

最も広く使われているタイプのデータベースです。データは 「テーブル」 と呼ばれる表形式で管理されます。

**特徴**:

* データがテーブル (表) の形で整理される
* テーブル間の関連付け (リレーション) ができる
* SQL 言語で操作する
* 堅牢性と信頼性が高い

**代表的な製品**:

* MySQL
* PostgreSQL
* Oracle Database
* Microsoft SQL Server

#### NoSQL データベース

従来のリレーショナルデータベースとは異なるアプローチを取るデータベースです。

**特徴**:

* 柔軟なデータ構造
* 大量データの高速処理に適している
* スケーラビリティ (拡張性) が高い

**主な種類**:

* ドキュメント型 (MongoDB)
* キーバリュー型 (Redis)
* カラム指向型 (Cassandra)
* グラフ型 (Neo4j)

> 📝 **ポイント**: どちらが優れているということではなく、用途によって使い分けます。一般的な業務アプリケーションでは RDBMS が多く使われ、大量のデータを扱うビッグデータやリアルタイム処理では NoSQL が選ばれることが多いです。

### 1.4 データベースの基本用語

データベースを理解するための重要な用語を見ていきましょう。

#### データベース

データベースは、関連するテーブルや情報をまとめて管理する場所です。例えば、学校の情報を管理する場合、生徒の名簿、授業の時間割、成績表などをすべて 1つの場所で管理できます。

#### テーブル (表)

データはテーブルと呼ばれる 2次元の表で管理されます。エクセルのシートのようなものをイメージするとわかりやすいでしょう。

**例：商品テーブル**

<table><thead><tr><th width="85">商品ID</th><th width="239.39996337890625">商品名</th><th>価格</th><th>在庫数</th><th>カテゴリID</th></tr></thead><tbody><tr><td>1</td><td>スマートフォン</td><td>80000</td><td>25</td><td>1</td></tr><tr><td>2</td><td>ノートパソコン</td><td>120000</td><td>10</td><td>1</td></tr><tr><td>3</td><td>コーヒーメーカー</td><td>15000</td><td>30</td><td>2</td></tr></tbody></table>

#### レコード (行)

テーブル内の 1行のデータをレコードと呼びます。上の表では、「スマートフォン」 の行が 1つのレコードです。

#### カラム (列)

データの各項目や属性をカラムと呼びます。上の表では 「商品名」 「価格」 などがカラムです。

#### プライマリーキー (主キー) &#x20;

各レコードを一意に識別するためのカラムです。上の表では 「商品ID」 がプライマリーキーです。プライマリーキーには重複する値が存在できません。

#### フォーリンキー (外部キー)

他のテーブルのプライマリーキーを参照するカラムです。上の表の 「カテゴリID」 は 「カテゴリテーブル」 のプライマリーキーを参照しています。

例：**カテゴリテーブル**

<table><thead><tr><th width="119.4000244140625">カテゴリID</th><th width="184.39990234375">カテゴリ名</th><th>説明</th></tr></thead><tbody><tr><td>1</td><td>電子機器</td><td>スマートフォン、パソコンなど</td></tr><tr><td>2</td><td>家電</td><td>調理器具、掃除機など</td></tr></tbody></table>

> 📝 **ポイント**: 外部キーにより、テーブル間の関連付け (リレーション) が可能になります。これにより 「商品がどのカテゴリに属するか」 といった情報を効率的に管理できます。

#### リレーションシップ

テーブル間の関係を表します。主に以下の種類があります。

1. **1対1 (One-to-One)** : 一方のテーブルの 1レコードがもう一方のテーブルの1レコードだけに関連
   * 例：「従業員」 と 「社員証」 の関係 ( 1人の従業員に1枚の社員証)
2. **1対多 (One-to-Many)** : 一方のテーブルの 1レコードがもう一方のテーブルの複数レコードに関連
   * 例：「カテゴリ」 と 「商品」 の関係 ( 1つのカテゴリに複数の商品)
3. **多対多 (Many-to-Many)** : 両方のテーブルのレコードが互いに複数のレコードに関連
   * 例：「学生」 と 「授業」 の関係 ( 1人の学生が複数の授業を受け、1つの授業に複数の学生が参加)

### 1.5 SQL とは

リレーショナルデータベースを操作するための言語が 「SQL (Structured Query Language、構造化問合せ言語)」 です。

#### SQL の特徴

* **標準化**: 国際標準化機構 (ISO) によって標準化されている
* **宣言型言語**: 「何を」 取得したいかを指定するだけで、「どのように」 取得するかはデータベースが決定
* **英語に似た文法**: 比較的読みやすく理解しやすい

#### SQL の基本コマンド

SQL は主に以下のタイプのコマンドに分けられます。

1. **データ定義言語 (DDL, Data Definition Language)**
   * データベースの構造を定義する
   * 例：`CREATE`, `ALTER`, `DROP`
2. **データ操作言語 (DML, Data Manipulation Language)**
   * データを操作する
   * 例：`SELECT`, `INSERT`, `UPDATE`, `DELETE`
3. **データ制御言語 (DCL, Data Control Language)**
   * 権限やアクセス制御を管理する
   * 例：`GRANT`, `REVOKE`

> 📝 **ポイント**: このドキュメントでは、まず 「データの取得」 (SELECT) と 「データの追加」 (INSERT) を中心に学びます。これらはデータベース操作の中で最も頻繁に使うコマンドです。

#### SQL の簡単な例

```sql
-- データの検索（取得）
SELECT * FROM products WHERE price >= 50000;

-- データの追加
INSERT INTO products (name, price, stock) VALUES ('ワイヤレスイヤホン', 15000, 50);

-- データの更新
UPDATE products SET stock = stock - 1 WHERE id = 1;

-- データの削除
DELETE FROM products WHERE stock = 0;
```

### 1.6 MySQL について

MySQL は世界で最も広く使われているオープンソースのリレーショナルデータベース管理システム (RDBMS) のひとつです。

#### MySQLの特徴

* **オープンソース**: 無料で使用可能 (商用利用にはライセンスが必要な場合も)
* **高速**: 高いパフォーマンスと安定性
* **利用しやすさ**: 初心者にも比較的取り組みやすい
* **広く採用**: WordPress、Facebook、Twitter、YouTubeなど多くのサービスで使用
* **クロスプラットフォーム**: Windows、Linux、macOS など様々な OS 上で動作

#### MySQL の歴史と現状

* 1995年に最初のバージョンがリリース
* 2008年に Sun Microsystems に買収
* 2010年に Oracle が Sun を買収し、現在は Oracle が開発を主導
* 現在の最新安定版は **MySQL 8.4 (**&#x32;025年時点)

#### 1.6.3 MySQL の主な用途

* Web アプリケーションのバックエンド
* 電子商取引 (ECサイト)
* コンテンツ管理システム (CMS)
* ログデータの保存と分析
* データウェアハウス (DWH) やビジネスインテリジェンス (BI)

***

### 演習問題

#### 問題 1-1: データベースの基本概念

以下の質問に答えてください。

1. データベースの主な役割を 3つ挙げてください。
2. リレーショナルデータベースと NoSQL データベースの主な違いを説明してください。
3. 以下の用語を正しく定義してください。\
   a)  テーブル    b)  レコード    c)  カラム    d)  プライマリーキー

<details>

<summary>解答例</summary>

1. データベースの主な役割 (以下のような回答が考えられます)
   * 大量のデータを効率的に保存する
   * 必要な情報をすばやく検索する
   * データの整合性を確保する
   * 複数のユーザーでデータを共有する
   * データへのアクセス権限を制御する
2. リレーショナルデータベースと NoSQL データベースの主な違い
   * リレーショナルデータベースは表形式でデータを管理し、SQL を使用して操作する。厳格なスキーマを持ち、データの整合性を重視する。
   * NoSQL データベースは柔軟なデータ構造を持ち、大量データの高速処理に適している。スキーマが柔軟または不要で、スケーラビリティに優れている。
3. 用語の定義\
   a)  テーブル: データベース内で行と列の形式で構造化されたデータを格納する表のこと\
   b)  レコード: テーブル内の1行のデータ\
   c)  カラム: テーブル内の特定の項目または属性を表す列\
   d)  主キー: テーブル内の各レコードを一意に識別するためのカラム

</details>

#### 問題 1-2: リレーションシップの理解

以下の関係がどのタイプのリレーションシップに当てはまるか選んでください ( 1対1、1対多、多対多)。

1. 国と首都の関係
2. 著者と書籍の関係
3. 学生と授業の関係
4. 社員と部署の関係
5. 人と運転免許証の関係

<details>

<summary>解答例</summary>

1. 国と首都の関係: 1対1 (One-to-One)
   * 1つの国には1つの首都があり、1つの首都は 1つの国にのみ属する
2. 著者と書籍の関係: 多対多 (Many-to-Many)
   * 1人の著者が複数の書籍を書くことができ、1つの書籍も複数の著者によって書かれることがある
3. 学生と授業の関係: 多対多 (Many-to-Many)
   * 1人の学生が複数の授業を受けることができ、1つの授業には複数の学生が登録できる
4. 社員と部署の関係: 多対1 (Many-to-One)
   * 複数の社員が 1つの部署に所属するが、通常は 1人の社員は 1つの部署にのみ所属する
5. 人と運転免許証の関係: 1対1 (One-to-One)
   * 1人の人は 1つの運転免許証を持ち、1つの運転免許証は 1人の人にのみ発行される

</details>

#### 問題 1-3: データベースとテーブルの関係

データベースとテーブルの関係について、以下の問いに答えてください。

1. データベースとテーブルの関係を説明してください。
2. あるオンラインショップのデータベースに含まれるテーブルにはどのようなものが考えられますか？2つ以上例を挙げてください。

<details>

<summary>解答例</summary>

1. データベースとテーブルの関係
   * データベースは関連するテーブルや情報をまとめて管理するための 「コンテナー」 または 「フォルダ」 のようなものです。
   * テーブルはデータベース内に存在し、実際のデータを格納する表のような構造です。
   * 1つのデータベースには複数のテーブルが含まれることが一般的です。
   * 例えば「学校データベース」には 「生徒テーブル」 「教師テーブル」 「科目テーブル」 などが含まれるといった関係です。
2. オンラインショップのデータベースに含まれるテーブル例
   * 商品テーブル (ID、商品名、価格、説明、在庫数など)
   * 顧客テーブル (ID、氏名、住所、電話番号、メールアドレスなど)
   * 注文テーブル (注文ID、顧客ID、注文日、合計金額など)
   * カテゴリテーブル (ID、カテゴリ名、親カテゴリIDなど)
   * ショッピングカートテーブル (ID、顧客ID、商品ID、数量など)

</details>

#### 問題 1-4: シンプルなテーブル構造

以下のような学校の生徒情報を管理するためのテーブルに必要なカラム (項目) を 3つ以上考えてください。

```
生徒テーブル:
- 生徒ID (例: 1001)
- 他にどのような情報が必要でしょうか？
```

<details>

<summary>解答例</summary>

生徒テーブルに考えられるカラム：

* 生徒ID (主キー)
* 氏名
* 生年月日
* 学年
* クラス
* 電話番号
* 住所
* 保護者名
* メールアドレス
* 入学年度

これらの中から必要なものを選んで使用します。実際のデータベース設計では、必要な情報と保護すべきプライバシー情報を考慮して設計します。

</details>

#### 問題 1-5: 要件の対応づけ

小さな図書館システムには以下の要件があります。これらの要件を満たすために必要なテーブル名を考えてください。複数のテーブルが必要な場合もあります。

1. 本のタイトル、著者、出版社を記録する
2. 会員の氏名、住所、電話番号を管理する
3. どの会員がどの本をいつ借りたか、いつ返却したかを記録する

<details>

<summary>解答例</summary>

次のようなテーブルが考えられます：

1. 本の情報を記録するための 「本テーブル」 (books など)
   * 本のタイトル、著者、出版社、ISBN、出版年などのカラムを含む
2. 会員情報を管理するための「会員テーブル」 (members など)
   * 会員の氏名、住所、電話番号、会員番号などのカラムを含む
3. 貸出記録を管理するための 「貸出テーブル」 (loans など)
   * 会員ID (外部キー)、本ID (外部キー)、貸出日、返却予定日、実際の返却日などのカラムを含む

この設計により、「どの会員がどの本をいつ借りて、いつ返却したか」 という情報を管理できます。貸出テーブルと他の 2つのテーブルは、外部キーで関連付けられています。

</details>
