# 2. 配列

### 2.1 配列とは

**配列**は、同じデータ型の要素をまとめて格納するためのデータ構造です。配列を使用すると、複数の値を1つの変数で管理できます。

例えば、10人の学生の点数を保存する場合：

```java
// 個別の変数で保存する場合
int score1 = 85;
int score2 = 90;
int score3 = 78;
// ... 以下続く
int score10 = 92;

// 配列を使用する場合
int[] scores = {85, 90, 78, 82, 88, 95, 76, 70, 91, 92};
```

配列を使用すると、データの管理が容易になり、繰り返し処理と組み合わせることで、効率的にデータを操作できます。

### 2.2 配列の宣言と初期化

Java では、配列を宣言・初期化するための複数の方法があります。

#### 2.2.1 配列の宣言

配列を宣言するには、データ型の後に `[]` を付けます：

```java
// データ型[] 配列名;
int[] numbers;     // 整数型配列の宣言
double[] values;   // 浮動小数点型配列の宣言
String[] names;    // 文字列型配列の宣言
```

この時点では、配列は実際には作成されておらず、配列を参照するための変数が宣言されただけです。

#### 2.2.2 配列の作成（メモリ割り当て）

配列を作成するには、`new` キーワードを使用して、配列の要素数を指定します：

```java
numbers = new int[5];     // 5つの整数を格納できる配列を作成
values = new double[10];  // 10個の浮動小数点数を格納できる配列を作成
names = new String[3];    // 3つの文字列を格納できる配列を作成
```

新しく作成された配列の各要素は、そのデータ型のデフォルト値で初期化されます：

* 数値型（`int`, `double` など）: `0` または `0.0`
* 文字型（`char`）: `\u0000`（ヌル文字）
* 真偽値型（`boolean`）: `false`
* 参照型（`String`, クラス型）: `null`

#### 2.2.3 配列の宣言と作成を同時に行う

宣言と作成を1行で行うことも可能です：

```java
int[] numbers = new int[5];
double[] values = new double[10];
String[] names = new String[3];
```

#### 2.2.4 配列の初期化

配列の要素に値を代入するには、インデックス（添え字）を使用します：

```java
numbers[0] = 10;  // 最初の要素に10を代入
numbers[1] = 20;  // 2番目の要素に20を代入
numbers[2] = 30;  // 3番目の要素に30を代入
numbers[3] = 40;  // 4番目の要素に40を代入
numbers[4] = 50;  // 5番目の要素に50を代入
```

> 📝 **ポイント**: Java の配列のインデックスは 0 から始まります。つまり、最初の要素のインデックスは 0、2番目の要素のインデックスは 1、というように続きます。

#### 2.2.5 配列の宣言と初期化を同時に行う

宣言と同時に初期値を設定することもできます：

```java
int[] numbers = {10, 20, 30, 40, 50};
String[] fruits = {"Apple", "Banana", "Cherry"};
```

この方法では、配列の大きさは自動的に初期化リストの要素数に設定されます。

### 2.3 配列要素へのアクセス

配列の各要素には、インデックスを使ってアクセスします。

#### 2.3.1 要素の取得

```java
int[] numbers = {10, 20, 30, 40, 50};

int firstNumber = numbers[0];  // 最初の要素: 10
int thirdNumber = numbers[2];  // 3番目の要素: 30

System.out.println("最初の数: " + firstNumber);
System.out.println("3番目の数: " + thirdNumber);
```

#### 2.3.2 要素の設定

```java
int[] scores = new int[5];  // 5つの整数を格納できる配列を作成

scores[0] = 85;  // 最初の要素に85を代入
scores[1] = 90;  // 2番目の要素に90を代入
scores[2] = 78;  // 3番目の要素に78を代入

System.out.println("1番目の点数: " + scores[0]);
System.out.println("2番目の点数: " + scores[1]);
System.out.println("3番目の点数: " + scores[2]);
```

#### 2.3.3 配列の長さの取得

配列の長さ（要素数）は、`length` プロパティを使用して取得できます：

```java
int[] numbers = {10, 20, 30, 40, 50};
int length = numbers.length;  // 5

System.out.println("配列の長さ: " + length);
```

> ⚠️ **注意**: `length` はメソッドではなくプロパティなので、括弧 `()` を付けずに使用します。

### 2.4 配列と繰り返し処理

配列の要素を処理する際は、ループを使用するのが一般的です。

#### 2.4.1 for ループを使用した配列の処理

```java
int[] numbers = {10, 20, 30, 40, 50};

// 配列の各要素を出力
for (int i = 0; i < numbers.length; i++) {
    System.out.println("numbers[" + i + "] = " + numbers[i]);
}
```

実行結果：

```
numbers[0] = 10
numbers[1] = 20
numbers[2] = 30
numbers[3] = 40
numbers[4] = 50
```

#### 2.4.2 拡張 for ループ（forEach ループ）

Java では、配列やコレクションの要素を簡単に反復処理するための拡張 for ループが提供されています：

```java
int[] numbers = {10, 20, 30, 40, 50};

// 拡張 for ループを使った配列の処理
for (int number : numbers) {
    System.out.println("値: " + number);
}
```

実行結果：

```
値: 10
値: 20
値: 30
値: 40
値: 50
```

拡張 for ループは、インデックスを気にせずに各要素に直接アクセスしたい場合に便利です。ただし、インデックスが必要な場合や、配列の要素を変更する場合は、通常の for ループを使用する必要があります。

> 📝 **ポイント**: 拡張 for ループは、配列の要素を読み取るだけの場合に最適です。要素の値を変更したり、インデックスを使用したりする必要がある場合は、通常の for ループを使用してください。

### 2.5 配列の操作例

#### 2.5.1 配列の要素の合計を計算する

```java
int[] numbers = {10, 20, 30, 40, 50};
int sum = 0;

// 配列の要素の合計を計算
for (int number : numbers) {
    sum += number;
}

System.out.println("合計: " + sum);  // 合計: 150
```

#### 2.5.2 配列の最大値を見つける

```java
int[] numbers = {15, 7, 23, 42, 9, 31};
int max = numbers[0];  // 最初の要素を最大値として初期化

// 配列の最大値を見つける
for (int i = 1; i < numbers.length; i++) {
    if (numbers[i] > max) {
        max = numbers[i];
    }
}

System.out.println("最大値: " + max);  // 最大値: 42
```

#### 2.5.3 配列の要素を逆順にする

```java
int[] numbers = {1, 2, 3, 4, 5};

// 配列の要素を逆順にする
for (int i = 0; i < numbers.length / 2; i++) {
    int temp = numbers[i];
    numbers[i] = numbers[numbers.length - 1 - i];
    numbers[numbers.length - 1 - i] = temp;
}

// 結果を出力
for (int number : numbers) {
    System.out.print(number + " ");  // 5 4 3 2 1
}
```

### 2.6 多次元配列

Java では、配列の配列を作成することで多次元配列を実現できます。

#### 2.6.1 2次元配列の宣言と初期化

```java
int[][] matrix = new int[3][4];  // 3行4列の行列（2次元配列）

// 個別に要素を初期化
matrix[0][0] = 1;
matrix[0][1] = 2;
matrix[0][2] = 3;
matrix[0][3] = 4;
matrix[1][0] = 5;
// ... 以下続く

// 初期化リストを使用した宣言と初期化
int[][] matrix2 = {
    {1, 2, 3, 4},
    {5, 6, 7, 8},
    {9, 10, 11, 12}
};
```

#### 2.6.2 2次元配列の処理

```java
int[][] matrix = {
    {1, 2, 3},
    {4, 5, 6},
    {7, 8, 9}
};

// 2次元配列の要素を出力
for (int i = 0; i < matrix.length; i++) {
    for (int j = 0; j < matrix[i].length; j++) {
        System.out.print(matrix[i][j] + " ");
    }
    System.out.println();  // 行の終わりで改行
}
```

実行結果：

```
1 2 3 
4 5 6 
7 8 9 
```

#### 2.6.3 拡張 for ループを使用した 2次元配列の処理

```java
int[][] matrix = {
    {1, 2, 3},
    {4, 5, 6},
    {7, 8, 9}
};

// 拡張 for ループを使用した 2次元配列の処理
for (int[] row : matrix) {
    for (int element : row) {
        System.out.print(element + " ");
    }
    System.out.println();
}
```

### 2.7 配列の注意点

#### 2.7.1 ArrayIndexOutOfBoundsException

配列のインデックスは、`0` から `length - 1` までの範囲内である必要があります。範囲外のインデックスにアクセスすると、`ArrayIndexOutOfBoundsException` が発生します：

```java
int[] numbers = {10, 20, 30};

System.out.println(numbers[0]);  // 10
System.out.println(numbers[2]);  // 30
// System.out.println(numbers[3]);  // エラー: ArrayIndexOutOfBoundsException
```

> ⚠️ **注意**: 配列のインデックスが範囲内であることを常に確認してください。特に、ループを使って配列の要素にアクセスする場合は、境界チェックが重要です。

#### 2.7.2 配列のサイズは固定

Java の配列は、一度作成するとサイズを変更できません。要素数を動的に変更する必要がある場合は、`ArrayList` などのコレクションを使用します（後の章で学習します）。

```java
int[] numbers = new int[3];  // 3つの要素を持つ配列を作成
// numbers のサイズは 3 で固定
```

#### 2.7.3 配列は参照型

配列は参照型であり、変数には配列自体ではなく、配列へのリファレンス（参照先）が格納されます。これにより、複数の変数が同じ配列を参照することができます：

```java
int[] array1 = {1, 2, 3};
int[] array2 = array1;  // array1 と同じ配列を参照

array2[0] = 99;  // array2 を通じて配列を変更

System.out.println(array1[0]);  // 99 - array1 を通じても変更が見える
```

> 📝 **ポイント**: 配列を関数に渡す場合、参照渡しになります。つまり、関数内で配列の要素を変更すると、元の配列も変更されます。

***

### 演習問題

#### 問題 2-1: 配列の宣言と初期化

5つの整数を格納する配列を宣言し、値 10, 20, 30, 40, 50 で初期化してください。その後、配列の各要素を出力してください。

```java
// 5つの整数を格納する配列を宣言し、初期化してください


// 配列の各要素を出力してください

```

<details>

<summary>ヒント</summary>

* 配列を宣言・初期化するには `int[] array = {10, 20, 30, 40, 50};` のように中括弧内に初期値を列挙します
* または `int[] array = new int[5];` で配列を作成し、`array[0] = 10;` のように各要素に値を代入することもできます
* for ループを使用して配列の各要素にアクセスし、`System.out.println()` で出力します

</details>

#### 問題 2-2: 配列の合計と平均

整数配列 `{85, 92, 78, 64, 91}` を作成し、合計と平均を計算して表示してください。

```java
// 配列を作成してください


// 合計を計算してください


// 平均を計算してください


// 結果を表示してください

```

<details>

<summary>ヒント</summary>

* 配列を宣言・初期化し、合計用の変数 `sum` を用意して 0 で初期化します
* for ループまたは拡張 for ループを使用して、配列の各要素を `sum` に加算します
* 平均値は合計を要素数（配列の長さ）で割って計算します：`average = (double) sum / array.length`
* 平均値を小数点以下まで正確に計算するためには、型変換（キャスト）が必要です

</details>

#### 問題 2-3: 最大値と最小値

整数配列 `{23, 17, 45, 36, 9, 52, 29}` の最大値と最小値を見つけて表示してください。

```java
// 配列を作成してください


// 最大値と最小値を見つけてください


// 結果を表示してください

```

<details>

<summary>ヒント</summary>

* 配列を宣言・初期化します
* 最大値と最小値を記録するための変数 `max` と `min` を用意し、初期値として配列の最初の要素を代入します
* for ループで配列の各要素を順に調べ、`max` より大きい値が見つかったら `max` を更新し、`min` より小さい値が見つかったら `min` を更新します
* ループ終了後、`max` と `min` を表示します

</details>

#### 問題 2-4: 配列の検索

数値配列 `{12, 5, 8, 21, 14, 3, 19, 7}` の中から、ユーザーが入力した数値を検索し、その数値が配列内にあるかどうか、またどの位置（インデックス）にあるかを表示するプログラムを作成してください。

```java
import java.util.Scanner;

public class ArraySearch {
    public static void main(String[] args) {
        // 配列を作成してください
        
        
        // ユーザーからの入力を受け取る
        Scanner scanner = new Scanner(System.in);
        System.out.print("検索する数値を入力してください: ");
        int searchValue = scanner.nextInt();
        
        // 配列内で数値を検索してください
        
        
        // 結果を表示してください
        
        
        scanner.close();
    }
}
```

<details>

<summary>ヒント</summary>

* 配列を宣言・初期化します
* for ループを使用して配列の各要素を順に調べ、ユーザーが入力した数値と一致するかどうかをチェックします
* 一致する値が見つかったら、その位置（インデックス）を記録し、検索が成功したことを示すフラグを設定します
* 検索が成功したかどうかに応じて、適切なメッセージを表示します

</details>

#### 問題 2-5: 2次元配列

3×3 の行列（2次元配列）を作成し、各要素に 1 から 9 までの値を順に代入してください。その後、行列を表形式で出力し、対角線上の要素の合計を計算して表示してください。

```java
// 3×3の行列（2次元配列）を作成してください


// 行列を表形式で出力してください


// 対角線上の要素の合計を計算してください


// 結果を表示してください

```

<details>

<summary>ヒント</summary>

* 2次元配列を宣言します：`int[][] matrix = new int[3][3];`
* ネストした for ループを使用して、各要素に値を代入します
* もう一つのネストした for ループを使用して、行列を表形式で出力します（内側のループの後に改行を忘れずに）
* 対角線上の要素は、行と列のインデックスが等しい要素（matrix\[0]\[0], matrix\[1]\[1], matrix\[2]\[2]）です
* 対角線上の要素の合計を計算する際は、それらの要素を合計する変数を用意します

</details>

#### 問題 2-6: 配列の要素を昇順にソート

整数配列 `{7, 3, 9, 2, 5, 8, 1, 6, 4}` を作成し、要素を昇順（小さい順）にソートして表示してください。バブルソートなどの基本的なソートアルゴリズムを使用してください。

```java
// 配列を作成してください


// バブルソートを使って配列をソートしてください


// ソートされた配列を表示してください

```

<details>

<summary>ヒント</summary>

* 配列を宣言・初期化します
* バブルソートは、隣接する要素を比較し、必要に応じて交換することで整列を行うアルゴリズムです
* ネストした for ループを使用して実装できます：外側のループは配列を何回走査するかを制御し、内側のループは隣接する要素を比較します
* 隣接する要素を交換するためには、一時変数を使用して一方の値を保存します
* ソート後に配列の各要素を出力して、正しくソートされていることを確認します

バブルソートの例:

```java
for (int i = 0; i < array.length - 1; i++) {
    for (int j = 0; j < array.length - 1 - i; j++) {
        if (array[j] > array[j + 1]) {
            // 要素を交換
            int temp = array[j];
            array[j] = array[j + 1];
            array[j + 1] = temp;
        }
    }
}
```

</details>
