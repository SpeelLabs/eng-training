# 7. 繰り返し処理

### 7.1 繰り返し処理とは

**繰り返し処理**（ループ）は、同じコードブロックを複数回実行するためのプログラミング構造です。繰り返し処理を使うことで、同様の処理を何度も書く代わりに、コンパクトなコードで表現できます。

たとえば、1から10までの数字を出力する場合：

```java
// 繰り返しなしの場合
System.out.println(1);
System.out.println(2);
System.out.println(3);
// ... 以下続く
System.out.println(10);

// 繰り返し処理を使用した場合
for (int i = 1; i <= 10; i++) {
    System.out.println(i);
}
```

繰り返し処理は、リストやデータの処理、一定回数の操作の実行など、多くのプログラミングタスクで必須の要素です。

### 7.2 for ループ

`for` ループは、あらかじめ反復回数が分かっているときに適した繰り返し構造です。

#### 1.2.1 基本構文

```java
for (初期化; 条件式; 更新) {
    // 繰り返し実行するコード
}
```

* **初期化**: ループ変数の初期値を設定します（最初に1回だけ実行）
* **条件式**: ループを継続するための条件です（各反復の前に評価）
* **更新**: 各反復の後に実行される式です（通常は変数の増加や減少）

例：

```java
// 1から5までを出力する
for (int i = 1; i <= 5; i++) {
    System.out.println("カウント: " + i);
}
```

実行結果：

```
カウント: 1
カウント: 2
カウント: 3
カウント: 4
カウント: 5
```

#### 7.2.2 for ループの動作順序

1. **初期化式**: `int i = 1` （変数 i に 1 を代入）
2. **条件式をチェック**: `i <= 5` （条件が true なら、ループの本体を実行）
3. **ループの本体を実行**: `System.out.println("カウント: " + i);`
4. **更新式を実行**: `i++` （i の値を 1 増やす）
5. **2～4を繰り返す**: 条件式が false になるまで
6. **条件式が false になったら**: ループを終了

> 📝 **ポイント**: for ループではループ変数 (i など) の初期値、終了条件、更新方法を一行で明確に記述できるため、コードの意図が理解しやすくなります。

#### 7.2.3 ループ変数のスコープ

for ループで宣言された変数は、ループ内でのみ有効です：

```java
for (int i = 0; i < 3; i++) {
    System.out.println("ループ内: " + i);
}
// System.out.println(i); // エラー: i はこのスコープでは使用できません
```

ループの外でも変数を使用したい場合は、ループの前に宣言します：

```java
int i;
for (i = 0; i < 3; i++) {
    System.out.println("ループ内: " + i);
}
System.out.println("ループ後の i: " + i); // 3
```

### 7.3 while ループ

`while` ループは、条件が真である限り繰り返し実行する構造です。繰り返す回数が事前に分からない場合に適しています。

#### 7.3.1 基本構文

```java
while (条件式) {
    // 繰り返し実行するコード
}
```

条件式が `true` である限り、ループの本体が繰り返し実行されます。

例：

```java
int count = 1;
while (count <= 5) {
    System.out.println("カウント: " + count);
    count++; // count を増加させないと無限ループになる
}
```

実行結果：

```
カウント: 1
カウント: 2
カウント: 3
カウント: 4
カウント: 5
```

> ⚠️ **注意**: while ループでは、必ずループ内で条件が最終的に `false` になるように変更を加える必要があります。そうしないと、プログラムは無限ループに陥ります。

#### 7.3.2 for ループとの比較

同じ処理を `for` ループと `while` ループで書いた場合：

```java
// for ループ
for (int i = 1; i <= 5; i++) {
    System.out.println("for: " + i);
}

// while ループ
int j = 1;
while (j <= 5) {
    System.out.println("while: " + j);
    j++;
}
```

`for` ループは、ループ変数の初期化、条件、更新をひとまとめにして記述できるため、規則的な繰り返しに向いています。 `while` ループは、条件のみを指定するため、より柔軟な繰り返し条件を表現できます。

### 7.4 do-while ループ

`do-while` ループは、コードブロックを最低1回実行した後、条件をチェックする繰り返し構造です。

#### 7.4.1 基本構文

```java
do {
    // 繰り返し実行するコード
} while (条件式);
```

例：

```java
int count = 1;
do {
    System.out.println("カウント: " + count);
    count++;
} while (count <= 5);
```

実行結果：

```
カウント: 1
カウント: 2
カウント: 3
カウント: 4
カウント: 5
```

#### 7.4.2 while と do-while の違い

最大の違いは、`do-while` ループでは条件が最初から `false` でも、コードブロックが少なくとも1回は実行されることです：

```java
int x = 10;

// while ループ - 条件が false のため実行されない
while (x < 5) {
    System.out.println("while: " + x);
    x++;
}

// do-while ループ - 条件が false でも1回は実行される
x = 10;
do {
    System.out.println("do-while: " + x);
    x++;
} while (x < 5);
```

実行結果：

```
do-while: 10
```

`while` ループでは条件が最初に評価されるため、条件が最初から `false` の場合、ループの本体は一度も実行されません。対照的に、`do-while` ループでは条件が後で評価されるため、条件が `false` でも最低1回はループの本体が実行されます。

> 📝 **ポイント**: 少なくとも1回は処理を実行したい場合、例えばユーザー入力の検証などには `do-while` ループが適しています。

### 7.5 ループの制御

#### 7.5.1 break 文

`break` 文を使用すると、現在のループを即座に終了し、ループの次の文から実行を再開します。

```java
for (int i = 1; i <= 10; i++) {
    if (i == 5) {
        break; // i が 5 になったらループを抜ける
    }
    System.out.println("break の例: " + i);
}
System.out.println("ループ終了後");
```

実行結果：

```
break の例: 1
break の例: 2
break の例: 3
break の例: 4
ループ終了後
```

#### 7.5.2 continue 文

`continue` 文を使用すると、ループの現在の反復をスキップし、次の反復に進みます。

```java
for (int i = 1; i <= 5; i++) {
    if (i == 3) {
        continue; // i が 3 のときだけ、以降の処理をスキップ
    }
    System.out.println("continue の例: " + i);
}
```

実行結果：

```
continue の例: 1
continue の例: 2
continue の例: 4
continue の例: 5
```

> 📝 **ポイント**: `break` はループ全体を終了させるのに対し、`continue` は現在の反復だけをスキップします。これらを使うと、条件に応じた柔軟なループ制御が可能になります。

### 7.6 ネストしたループ

ループの中に別のループを配置することを**ネストしたループ**と呼びます。これは多次元データの処理や複雑なパターンの生成などに役立ちます。

```java
for (int i = 1; i <= 3; i++) {
    for (int j = 1; j <= 3; j++) {
        System.out.println("i = " + i + ", j = " + j);
    }
}
```

実行結果：

```
i = 1, j = 1
i = 1, j = 2
i = 1, j = 3
i = 2, j = 1
i = 2, j = 2
i = 2, j = 3
i = 3, j = 1
i = 3, j = 2
i = 3, j = 3
```

このコードでは、外側のループが1回実行されるごとに、内側のループが完全に（3回）実行されます。したがって、全部で 3 × 3 = 9 回の出力が生成されます。

#### 7.6.1 パターンの出力例

ネストしたループを使って、簡単な長方形パターンを出力できます：

```java
for (int i = 1; i <= 4; i++) {
    for (int j = 1; j <= 6; j++) {
        System.out.print("* ");
    }
    System.out.println(); // 行の終わりで改行
}
```

実行結果：

```
* * * * * * 
* * * * * * 
* * * * * * 
* * * * * * 
```

> 📝 **ポイント**: ネストしたループを使う場合、内側のループは外側のループの1回の反復ごとに完全に実行されます。反復回数の合計は、各ループの反復回数の積になります。

***

### 演習問題

#### 問題 7-1: 基本的な for ループ

1から10までの整数を順番に出力する for ループを作成してください。

```java
// 1から10までの整数を順番に出力するfor文を書いてください


```

<details>

<summary>ヒント</summary>

* for ループの基本構文は `for (初期化; 条件; 更新) { ... }` です
* 変数 i の初期値を 1 とし、10以下の間ループを続けます
* 各反復で i の値を 1 ずつ増やします

</details>

#### 問題 7-2: 偶数の出力

1から20までの整数のうち、偶数だけを出力する for ループを作成してください。

```java
// 1から20までの整数のうち、偶数だけを出力するfor文を書いてください


```

<details>

<summary>ヒント</summary>

* 偶数は 2 で割り切れる数です（i % 2 == 0）
* for ループ内で if 文を使用して、偶数かどうかを判定できます
* または、ループ変数を 2 ずつ増やして（i += 2）偶数だけを反復することもできます

</details>

#### 問題 7-3: カウントダウン

10から1までカウントダウンする while ループを作成してください。

```java
// 10から1までカウントダウンするwhile文を書いてください


```

<details>

<summary>ヒント</summary>

* while ループの基本構文は `while (条件) { ... }` です
* カウント用の変数を 10 で初期化します
* 変数が 1 以上の間ループを続けます
* 各反復で変数を 1 ずつ減らします（i--）

</details>

#### 問題 7-4: 合計の計算

1から100までの整数の合計を計算し、結果を表示するプログラムを作成してください。

```java
// 1から100までの整数の合計を計算するプログラムを書いてください


```

<details>

<summary>ヒント</summary>

* 合計を記録するための変数（sum など）を用意し、0 で初期化します
* 1 から 100 までのループを作成します
* 各反復で、ループ変数の値を sum に加算します
* ループ終了後に合計を表示します

</details>

#### 問題 7-5: break と continue の使用

1から10までの整数を処理するループを作成し、以下の条件を実装してください：

* 数値が 3 の場合、その数値をスキップする（出力しない）
* 数値が 7 に達したら、ループを終了する

```java
// 条件に従ってbreak文とcontinue文を使用するループを書いてください


```

<details>

<summary>ヒント</summary>

* for または while ループを使って 1 から 10 までの数値を反復処理します
* 数値が 3 かどうかを if 文でチェックし、3 の場合は continue を使用します
* 数値が 7 かどうかを if 文でチェックし、7 の場合は break を使用します
* ループの状態を把握するため、実行時にメッセージを出力するとよいでしょう

</details>

#### 問題 7-6: 九九の表の出力

九九の表（1×1から9×9まで）を出力するプログラムを作成してください。

```java
// 九九の表を出力するプログラムを書いてください


```

<details>

<summary>ヒント</summary>

* 外側のループで 1 から 9 までの数値（i）を反復します
* 内側のループで 1 から 9 までの数値（j）を反復します
* 各組み合わせで i \* j を計算して出力します
* 各段の終わりで改行します
* フォーマットを整えるために printf を使用すると見やすくなります

</details>
