---
description: >-
  パート 2 では、パート 1 で作成したインメモリーベースのブログアプリケーションを、MySQL
  データベースを使用した永続化対応のアプリケーションに発展させます。この段階では、本格的な CRUD 操作、DAO
  パターンの実装、コメント機能、検索機能などを追加し、実用的な Web アプリケーションを構築します。
---

# パート 2：データ永続化と応用機能

### 目標

このパートを終了すると、以下のことができるようになります。

| 技術スキル        | 説明                             |
| ------------ | ------------------------------ |
| データベース連携     | JDBC を使用した MySQL データベースとの接続と操作 |
| DAO パターン実装   | データアクセス層の適切な分離と実装              |
| CRUD 操作の完全実装 | 作成・読取・更新・削除の全機能実装              |
| トランザクション処理   | データベース操作の整合性確保                 |
| 検索機能とページング   | 効率的なデータ検索と表示                   |

### 基本モジュール構成

パート 2 は以下の 3つの基本モジュールで構成されています。

#### モジュール 4: データベース連携

* MySQL データベースの設定と接続
* JDBC による基本的なデータベース操作
* 投稿データのデータベース永続化
* データベース設計とテーブル作成
* PreparedStatement による安全なSQL実行

#### モジュール 5: DAO パターンと投稿管理

* DAO（Data Access Object）パターンの実装
* 投稿データの CRUD 操作完全実装
* データベース接続の管理
* トランザクション処理の基礎
* エラーハンドリング

#### モジュール 6: コメントと検索機能

* コメント機能の実装
* 投稿検索機能の実装
* ページング処理による大量データ対応
* パフォーマンス最適化の基礎

### 発展モジュール

パート 2 の基本を習得した後、以下の発展モジュールに取り組むことができます。

| 発展モジュール           | 主な学習内容                                                                                |
| ----------------- | ------------------------------------------------------------------------------------- |
| **2-A: 高度なデータ管理** | • 複数テーブルの関連管理\<br>• JOIN を使用した複雑なクエリ\<br>• インデックスとパフォーマンス最適化\<br>• データベース設計のベストプラクティス |
| **2-B: セキュリティ強化** | • SQL インジェクション対策の詳細\<br>• 入力値検証の強化\<br>• CSRF 対策の実装\<br>• セッション管理のセキュリティ              |

### 開発の流れ

パート 2 の開発フローは以下のようになります。

```
モジュール 4
[パート1アプリ] → [MySQL DB設計] → [JDBC接続] → [基本CRUD] → [永続化対応]

モジュール 5  
[基本CRUD] → [DAO層分離] → [投稿管理機能] → [編集・削除] → [エラー処理]

モジュール 6
[基本機能] → [コメント機能] → [検索機能] → [ページング] → [最適化]
```

### プロジェクト構成

パート 2 終了時点でのプロジェクト構成は以下のようになります。

```
blog-app/
├── src/
│   └── main/
│       ├── java/
│       │   └── com/example/blog/
│       │       ├── model/
│       │       │   ├── Post.java
│       │       │   └── Comment.java
│       │       ├── dao/
│       │       │   ├── PostDAO.java
│       │       │   └── CommentDAO.java
│       │       ├── servlet/
│       │       │   ├── post/
│       │       │   │   ├── PostListServlet.java
│       │       │   │   ├── PostCreateServlet.java
│       │       │   │   ├── PostDetailServlet.java
│       │       │   │   ├── PostEditServlet.java
│       │       │   │   ├── PostUpdateServlet.java
│       │       │   │   └── PostDeleteServlet.java
│       │       │   └── comment/
│       │       │       ├── CommentAddServlet.java
│       │       │       └── CommentDeleteServlet.java
│       │       └── util/
│       │           ├── DatabaseUtil.java
│       │           └── ValidationUtil.java
│       └── webapp/
│           ├── WEB-INF/
│           │   └── web.xml
│           ├── css/
│           │   └── style.css
│           └── jsp/
│               ├── post/
│               │   ├── list.jsp
│               │   ├── create.jsp
│               │   ├── detail.jsp
│               │   └── edit.jsp
│               ├── comment/
│               │   └── form.jsp
│               └── common/
│                   ├── header.jsp
│                   ├── footer.jsp
│                   └── error.jsp
├── pom.xml
└── database/
    └── schema.sql
```

### パート 2 での成果物

パート 2 を終了すると、以下の機能を持つ本格的なブログアプリケーションが完成します。

| 機能カテゴリ         | 詳細機能                                                               |
| -------------- | ------------------------------------------------------------------ |
| **データ永続化**     | • MySQL データベースによるデータ保存\<br>• CRUD 操作の完全実装\<br>• トランザクション処理による整合性確保 |
| **投稿管理**       | • 投稿の作成・編集・削除\<br>• カテゴリ別分類\<br>• 投稿日時の自動管理                        |
| **コメント機能**     | • 投稿へのコメント追加\<br>• コメントの表示と削除\<br>• コメント数の表示                       |
| **検索とフィルタリング** | • キーワード検索\<br>• 日付範囲での絞り込み\<br>• 基本的な検索条件指定                        |
| **ページング**      | • 大量データの効率的表示\<br>• ページネーション\<br>• 表示件数の設定                         |
| **アーキテクチャ**    | • DAO パターンによるデータアクセス層分離\<br>• 適切なエラーハンドリング\<br>• シンプルで保守しやすい構造     |

### 学習ポイント

パート 2 で特に注目すべき学習ポイントは以下の通りです。

#### データベース設計とテーブル設計

**主要テーブル**:

* `posts`: 投稿データ
* `comments`: コメントデータ

**設計原則**:

* 正規化による重複データの排除
* 適切な主キーと外部キーの設定
* 基本的なインデックス設計

#### DAO パターンとシンプルなアーキテクチャ

| レイヤー                   | 役割           | 実装例                 |
| ---------------------- | ------------ | ------------------- |
| **Presentation Layer** | ユーザーインターフェース | Servlet, JSP        |
| **Data Access Layer**  | データアクセス      | PostDAO, CommentDAO |
| **Model Layer**        | データ表現        | Post, Comment       |

#### JDBC と SQL の実践的活用

* **PreparedStatement**: SQL インジェクション対策
* **Connection 管理**: リソースの適切な解放
* **トランザクション**: データ整合性の確保
* **エラーハンドリング**: SQLException の適切な処理

#### パフォーマンス最適化の基礎

* **ページング**: `LIMIT` と `OFFSET` を使用した効率的データ取得
* **基本的なインデックス**: 検索性能の向上
* **効率的なSQL**: 必要なデータのみを取得
* **コネクション管理**: リソース使用量の最適化

### 次のステップ

パート 2 を完了すると、実用的な Web アプリケーション開発の基礎を習得できます。以下の選択肢があります：

* **パート 3** に進み、ユーザー管理とソーシャル機能を実装
* **発展モジュール 2-A** に取り組み、高度なデータ管理技術を習得
* **発展モジュール 2-B** に挑戦し、セキュリティ対策を強化

### 技術要件

パート 2 を開始する前に、以下の環境が準備されていることを確認してください：

* **MySQL 8.0+**: データベースサーバー
* **MySQL Connector/J**: JDBC ドライバー
* **パート 1 の完成**: 基本的な Servlet/JSP アプリケーション

パート 2 では、パート 1 で学んだ知識を基盤として、より実践的で本格的な Web アプリケーション開発技術を習得していきます。
